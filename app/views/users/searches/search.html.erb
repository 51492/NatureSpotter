<h2>Results index</h2>

  <% if @range == "User" %> <!--検索対象モデルがUserの時 -->

    <% if @users_id.nil? %>
      <p>検索ワード<%= @word %>に該当するユーザーはいませんでした。<p>

    <% else %>
      <div class="row">
        <div class="col-10 offset-1">

          <table class="table table-hover">
            <tbody>
              <% @users.each do |user| %>

                <tr>
                  <td style="width: 20%">
                    <%= link_to user_path(user) do %>
                      <%= image_tag user.get_profile_image(100, 100), class: "rounded-circle" %>
                    <% end %>
                  </td>

                  <td style="width: 30%">
                    <%= user.name %>
                  </td>

                  <td style="width: 30%">
                    投稿数 <%= user.posts.count %>
                  </td>

                  <td>
                    <% if user == current_user %> <!--表示してるユーザーが自分のとき-->
                      <%= link_to edit_user_path(user), class: "btn btn-outline-secondary btn-block" do %>
                        <i class="fas fa-user-edit"></i>
                      <% end %>

                    <% elsif current_user.following?(user) %> <!--表示してるユーザーが自分以外で、そのユーザーをフォローしている状態のとき-->
                      <%= link_to user_relationships_path(user.id), method: :delete, class: "btn btn-outline-info btn-block" do %>
                        <i class="fa-solid fa-user-minus"></i>
                      <% end %>

                    <% else %>  <!--表示してるユーザーが自分以外で、そのユーザーをフォローしてない状態のとき(上記二択以外のとき)-->
                      <%= link_to user_relationships_path(user.id), method: :post, class: "btn btn-outline-success btn-block" do %>
                        <i class="fa-solid fa-user-plus"></i>
                      <% end %>

                    <% end %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>

        </div>
      </div>

    <!--<div class="row">-->
    <!--  <div class="col-2 col-md-4 col-lg-5"></div>-->
    <!--  <div class="col-8 col-md-4 my-3"><%#= paginate @users %></div>-->
    <!--</div>-->
    <% end %>

  <% else %> <!--検索対象モデルがUserではない時(= 検索対象モデルがPostの時) -->
    <% if @books_id.nil? %>
      <p>検索ワード<%= @word %>に該当する投稿はありませんでした。<p>

    <% else %>
      <div class="row row-cols-1 row-cols-md-4 g-5">
        <% @posts.each do |post| %>
          <div class="col-sm-9 offset-sm-2 col-md-3 offset-md-0">
            <div class="card-link my-3 shadow">
              <div class="card my-3">
                <%= link_to post_path(post), style: "color: black;" do %>
                  <%= image_tag post.get_image(250, 250), width: '100%', height: '100%', class: "card-img-top" %>
                  <%#= attachment_image_tag post, :image, fallback: "no_image.jpg", size: "250x250", class: "card-img-top" %>
                  <div class="card-body">
                    <h5 class="card-title"><%= post.place %></h5>
                    <p class="card-text"><%= post.address %></p>
                    <p class="card-text"><%= post.caption %></p>
                    <p><%= render "users/posts/like", post: post %>&emsp;<i class="fa-regular fa-comments"></i>：<%= post.comments.count %></p>
                <% end %>
                      <p class="card-text"><small class="text-muted"><%= post.created_at.strftime('%Y/%m/%d %H:%M') %></small></p>
                  </div>
                </div>
                <!--<p>ユーザーネーム：<%#= post.user.name %></p>-->
              </div>
          </div>
        <% end %>
      </div>

      <!--<div class="row my-3">-->
      <!--  <div class="col-2 col-md-4 col-lg-5"></div>-->
      <!--  <div class="col-8 col-md-4"><%#= paginate @posts %></div>-->
      <!--</div>-->
    <% end %>
  <% end %>
